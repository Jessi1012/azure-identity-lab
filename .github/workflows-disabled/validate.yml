name: Code Validation

on:
  [push, pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
      - name: Setup TFLint
        uses: terraform-linters/setup-tflint@v4
        with:
         tflint_version: latest

      - name: Run TFLint
        working-directory: terraform
        run: |
         tflint --init
         tflint
        continue-on-error: true


      - name: Terraform format check (TFLint)
        working-directory: terraform
        run: |
         curl -s https://raw.githubusercontent.com/terraform-linters/tflint/master/install_linux.sh | bash
         tflint --init
         tflint
        continue-on-error: true

      - name: Terraform format check (TFLint)
        uses: reviewdog/action-tflint@master
        with:
          working_directory: terraform
        continue-on-error: true
